/**
 * jQuery FocusPoint; version: v2-dev
 * Author: J. Menz http://jonathonmenz.com
 * Source: https://github.com/jonom/jquery-focuspoint
 * Copyright (c) 2014 - 2016 J. Menz; License TBC
 * @preserve
 */
!function(i,t,a,e){function n(t,a){this.element=t,this.settings=i.extend({},s,a),this.init()}var s={reCalcOnWindowResize:!0,setTransformOrigin:!0,legacyGrid:!1},o=i(),r,c=!1,p=function(){c||(c=!0,h(),g())},g=function(i,t,a){var e;return function(){var n=this,s=arguments,o=function(){e=null,a||i.apply(n,s)},r=a&&!e;clearTimeout(e),e=setTimeout(o,t),r&&i.apply(n,s)}}((function(){c=!1}),250),h=function(){o.focusPoint("adjustFocus"),c&&(t.requestAnimationFrame?t.requestAnimationFrame(h):setTimeout(h,1e3/15))},l=function(){i(t).off("resize.focuspoint"),o.length&&i(t).on("resize.focuspoint",p)},m=function(i,t){return i-t},f=function(i,t){var a=t-1;if(a<0)return.5*(1-t);if(a>0){var e=-1*a,n=.5-i*t;return n>0?0:n<0&&n<e?e:n}return 0},u=function(t,a,e){var n=a.split(","),s=[];return i.each(n,(function(i,a){n[i]=parseFloat(a.trim()),!0===e&&(n[i]="X"===t?.5*(n[i]+1):-.5*(n[i]-1))})),n.length>1?(n.sort(m),s.start=n[0],s.stop=n[1],s.average=(n[0]+n[1])/2):s.start=s.stop=s.average=n[0],s.maxScale=1/(s.stop-s.start),s};i.extend(n.prototype,{init:function(){if(this.$el=i(this.element),this.$image=this.$el.find("img, video").first(),this.imageW=this.$el.data("imageW"),this.imageH=this.$el.data("imageH"),this.imageRatio=this.imageW/this.imageH,!this.imageW&&!this.imageH)return this.resolveImageSize();var t=this;if(i.each(["X","Y"],(function(i,a){var e=u(a,String(t.$el.data("focus"+a)),t.settings.legacyGrid);t["focus"+a+"MinStart"]=e.start,t["focus"+a+"MinStop"]=e.stop,t["focus"+a]=e.average,t["minCroppingRegionMaxScale"+a]=e.maxScale,e=u(a,String(t.$el.data("focus"+a+"Ideal")),t.settings.legacyGrid),t["focus"+a+"IdealStart"]=e.start,t["focus"+a+"IdealStop"]=e.stop,t["idealCroppingRegionMaxScale"+a]=e.maxScale})),this.minCroppingRegionW=(this.focusXMinStop-this.focusXMinStart)*this.imageW,this.minCroppingRegionH=(this.focusYMinStop-this.focusYMinStart)*this.imageH,this.minCroppingRegionRatio=this.minCroppingRegionW/this.minCroppingRegionH,this.idealCroppingRegionW=(this.focusXIdealStop-this.focusXIdealStart)*this.imageW,this.idealCroppingRegionH=(this.focusYIdealStop-this.focusYIdealStart)*this.imageH,this.idealCroppingRegionRatio=this.idealCroppingRegionW/this.idealCroppingRegionH,this.settings.setTransformOrigin){var a=100*t.focusX+"% "+100*t.focusY+"%";this.$image.css({"webkit-transform-origin":a,"transform-origin":a})}this.$el.addClass("focuspoint-active"),this.adjustFocus(),this.settings.reCalcOnWindowResize&&this.windowOn()},resolveImageSize:function(){if(this.triedAutoResolution)return!1;this.triedAutoResolution=!0;var t=this.$el;i("<img />").one("load",(function(){t.data("imageW",this.width),t.data("imageH",this.height),t.focusPoint("init")})).attr("src",this.$image.attr("src"))},windowOn:function(){o=o.add(this.element),l()},windowOff:function(){o=o.not(this.element),l()},adjustFocus:function(){var i={};if(i.containerW=this.$el.width(),i.containerH=this.$el.height(),!(i.containerW>0&&i.containerH>0&&this.imageW>0&&this.imageH>0))return!1;i.containerRatio=i.containerW/i.containerH,i.containerRatio!==this.imageRatio?(i.axisScale={X:this.imageRatio/i.containerRatio,Y:i.containerRatio/this.imageRatio},i.containerRatio>=this.idealCroppingRegionRatio&&i.containerRatio<=this.imageW/this.idealCroppingRegionH?(i.clippingMode="ideal",i.primaryClippingAxis="Y",i.secondaryClippingAxis="X"):i.containerRatio<=this.idealCroppingRegionRatio&&i.containerRatio>=this.idealCroppingRegionW/this.imageH?(i.clippingMode="ideal",i.primaryClippingAxis="X",i.secondaryClippingAxis="Y"):this.imageRatio>i.containerRatio?(i.clippingMode="classic",i.primaryClippingAxis="X",i.axisScale.X>this.minCroppingRegionMaxScaleX&&(i.clippingMode="min")):(i.clippingMode="classic",i.primaryClippingAxis="Y",i.axisScale.Y>this.minCroppingRegionMaxScaleY&&(i.clippingMode="min")),i.scale=1,i.shiftPrimary=0,i.shiftSecondary=0,"ideal"===i.clippingMode?(i.scale=this["idealCroppingRegionMaxScale"+i.primaryClippingAxis]/i.axisScale[i.primaryClippingAxis],i.shiftSecondary=100*f(this["focus"+i.secondaryClippingAxis],i.scale)+"%",i.shiftPrimary=-100*this["focus"+i.primaryClippingAxis+"IdealStart"]*i.axisScale[i.primaryClippingAxis]*i.scale+"%"):"min"===i.clippingMode?(i.scale=this["minCroppingRegionMaxScale"+i.primaryClippingAxis]/i.axisScale[i.primaryClippingAxis],i.shiftSecondary=100*f(this["focus"+i.secondaryClippingAxis],i.scale)+"%",i.shiftPrimary=-100*this["focus"+i.primaryClippingAxis+"MinStart"]*i.axisScale[i.primaryClippingAxis]*i.scale+"%"):i.shiftPrimary=100*f(this["focus"+i.primaryClippingAxis],i.axisScale[i.primaryClippingAxis])+"%","X"===i.primaryClippingAxis?this.$image.css({width:i.axisScale[i.primaryClippingAxis]*i.scale*100+"%",height:100*i.scale+"%",left:i.shiftPrimary,top:i.shiftSecondary}):this.$image.css({width:100*i.scale+"%",height:i.axisScale[i.primaryClippingAxis]*i.scale*100+"%",left:i.shiftSecondary,top:i.shiftPrimary})):this.$image.css({width:"100%",height:"100%",left:0,top:0})}}),i.fn.focusPoint=function(t){return this.each((function(){i.data(this,"focusPoint")||i.data(this,"focusPoint",new n(this,t))})),"string"==typeof t?this.each((function(){var a;i(this).data("focusPoint")[t]()})):this}}(jQuery,window,document);